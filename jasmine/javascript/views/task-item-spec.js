// Generated by CoffeeScript 1.7.1
(function() {
  describe("Task Item View", function() {
    var taskItem;
    taskItem = {};
    beforeEach(function() {
      loadFixtures("/views/task-list.html");
      return taskItem = new App.Views.TaskItem({
        id: "task-item-2"
      });
    });
    describe("_attachBehavior()", function() {
      it("shows task details when it is clicked", function() {
        var domElement;
        domElement = taskItem.domElement;
        domElement.click();
        expect(domElement).toHaveClass("selected");
        return expect(domElement.children(".task-details-container")).toBeVisible();
      });
      return it("toggles the task-details-container when clicked", function() {
        var domElement;
        domElement = taskItem.domElement;
        domElement.click();
        expect(domElement).toHaveClass("selected");
        expect(domElement.children(".task-details-container")).toBeVisible();
        domElement.click();
        expect(domElement).not.toHaveClass("selected");
        return expect(domElement.children(".task-details-container")).not.toBeVisible();
      });
    });
    return describe("_getComponents()", function() {
      it("sets the checkbox to a TaskItemCheckbox view object", function() {
        var checkboxView;
        checkboxView = App.Views.TaskItemCheckbox.findAll()[0];
        checkboxView.parent = taskItem;
        taskItem.checkbox = null;
        taskItem._getComponents();
        return expect(taskItem.checkbox).toEqual(checkboxView);
      });
      it("sets the editForm to a TaskEditForm view object", function() {
        var editForm;
        editForm = App.Views.TaskEditForm.findAll()[0];
        editForm.parent = taskItem;
        taskItem.editForm = null;
        taskItem._getComponents();
        return expect(taskItem.editForm).toEqual(editForm);
      });
      it("does not get a TaskItemCheckbox view object if there is no checkbox element in the domElement", function() {
        var domElement;
        domElement = $("<li id='new-task-item'>new task item without a checkbox</li>");
        taskItem = new App.Views.TaskItem({
          domElement: domElement
        });
        taskItem._getComponents();
        return expect(taskItem.checkbox).toBe(void 0);
      });
      it("sets the deleteLink to a dom element", function() {
        taskItem = new App.Views.TaskItem;
        taskItem.domElement = $("#task-item-2");
        taskItem._getComponents();
        return expect(taskItem.deleteLink.html().trim()).toBe("delete");
      });
      return it("sets the editLink to a dom element", function() {
        taskItem = new App.Views.TaskItem;
        taskItem.domElement = $("#task-item-2");
        taskItem._getComponents();
        return expect(taskItem.editLink.html().trim()).toBe("edit");
      });
    });
  });

}).call(this);
